<!DOCTYPE html>
<html>
<head>
    <title>Jogo Simples com Cachorro</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #e0e0e0;
        }
        #gameCanvas {
            border: 1px solid black;
        }
        #gameOverScreen {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background-color: white;
            border: 1px solid black;
            padding: 20px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="gameOverScreen">
        <p>Game Over!</p>
        <p id="highScoreText"></p>
        <button onclick="restartGame()">Restart</button>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const highScoreText = document.getElementById('highScoreText');

        canvas.width = Math.min(window.innerWidth, 800);
        canvas.height = Math.min(window.innerHeight, 600);

        let jogoRodando = true;
        let pontuacao = 0;
        let highScore = localStorage.getItem('highScore') || 0;

        let cachorro = {
            x: canvas.width / 2, y: canvas.height / 2, width: 50, height: 50, speed: 5
        };
        let teclasPressionadas = {};

        let coleiras = [];
        let velocidadeColeira = 5;
        let intervaloColeira = 1500;
        let ultimaColeira = 0;

        function criarColeira() {
            let posX = Math.random() * (canvas.width - 30);
            coleiras.push({ x: posX, y: -30, width: 30, height: 30 });
        }

        function atualizarColeiras() {
            let agora = Date.now();
            if (agora - ultimaColeira > intervaloColeira) {
                criarColeira();
                ultimaColeira = agora;
            }

            coleiras.forEach(coleira => {
                coleira.y += velocidadeColeira;
                if (coleira.y > canvas.height) {
                    coleiras.shift();
                }
            });
        }

        function detectarColisoes() {
            coleiras.forEach(coleira => {
                if (cachorro.x < coleira.x + coleira.width &&
                    cachorro.x + cachorro.width > coleira.x &&
                    cachorro.y < coleira.y + coleira.height &&
                    cachorro.y + cachorro.height > coleira.y) {
                    gameOver();
                }
            });
        }

        function gameOver() {
            jogoRodando = false;
            highScore = Math.max(highScore, pontuacao);
            localStorage.setItem('highScore', highScore);
            highScoreText.textContent = `Recorde: ${highScore}`;
            gameOverScreen.style.display = 'block';
        }

        function restartGame() {
            window.location.reload();
        }

        function loopDeJogo() {
            if (!jogoRodando) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (teclasPressionadas['ArrowLeft'] && cachorro.x > 0) {
                cachorro.x -= cachorro.speed;
            }
            if (teclasPressionadas['ArrowRight'] && cachorro.x < canvas.width - cachorro.width) {
                cachorro.x += cachorro.speed;
            }
            if (teclasPressionadas['ArrowUp'] && cachorro.y > 0) {
                cachorro.y -= cachorro.speed;
            }
            if (teclasPressionadas['ArrowDown'] && cachorro.y < canvas.height - cachorro.height) {
                cachorro.y += cachorro.speed;
            }

            atualizarColeiras();
            coleiras.forEach(coleira => {
                ctx.fillStyle = 'blue';
                ctx.fillRect(coleira.x, coleira.y, coleira.width, coleira.height);
            });

            ctx.fillStyle = 'brown';
            ctx.fillRect(cachorro.x, cachorro.y, cachorro.width, cachorro.height);

            detectarColisoes();

            pontuacao++;
            ctx.fillStyle = 'black';
            ctx.font = '20px Arial';
            ctx.fillText(`Pontuação: ${pontuacao}`, 10, 20);

            requestAnimationFrame(loopDeJogo);
        }

        window.addEventListener('keydown', function(event) {
            teclasPressionadas[event.key] = true;
        });

        window.addEventListener('keyup', function(event) {
            teclasPressionadas[event.key] = false;
        });

        canvas.addEventListener('touchstart', function(event) {
            const touchX = event.touches[0].clientX;
            const touchY = event.touches[0].clientY;

            if (touchX < canvas.width / 2) {
                cachorro.x -= cachorro.speed;
            } else {
                cachorro.x += cachorro.speed;
            }

            if (touchY < canvas.height / 2) {
                cachorro.y -= cachorro.speed;
            } else {
                cachorro.y += cachorro.speed;
            }
        });

        loopDeJogo();
    </script>
</body>
</html>
